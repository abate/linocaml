OASISFormat: 0.4
Name:        linocaml
Version:     0.1
Homepage:    https://github.com/keigoi/linocaml
Synopsis:    A library with some ppx
Authors:     Keigo Imai
License:     Apache
Plugins:     META (0.4), DevFiles (0.4)
BuildTools: ocamlbuild

Library linocaml
  Path: lib
  Findlibname: linocaml
  Pack: true
  Modules:
    Lens, Base, Direct

Flag lwt
  Description: build the Lwt submodule
  Default: true

Flag test
  Description: build the tests

Library linocaml_lwt
  Path: lwt
  Findlibname: lwt
  Findlibparent: linocaml
  Build$:        flag(lwt)
  Install$:      flag(lwt)
  BuildDepends:
    linocaml, lwt, lwt.unix
  Modules:
    Linocaml_lwt

Library ppx
  Path: ppx
  FindlibName: ppx
  FindlibParent: linocaml
  XMETAType: syntax
  XMETARequires: linocaml, ppx_deriving
  XMETAExtraLines: ppx = "ppx_linocaml"
  Modules:
    Ppx_linocaml_empty.ml

Library ppx_internal
  Path: ppx
  FindlibName: internal
  FindlibParent: ppx
  BuildDepends:
    compiler-libs, ppx_tools.metaquot, ppx_deriving.api
  Modules:
    Ppx_linocaml

Executable ppx_linocaml
  Path: ppx
  CompiledObject: best
  BuildDepends:
    linocaml.ppx.internal
  MainIs:
    ppx_linocaml_ex.ml

Library ppx_lens
  Path: ppx
  FindlibName: ppx_lens
  FindlibParent: linocaml
  XMETAType: syntax
  XMETARequires: ppx_deriving, linocaml
  XMetaExtraLines: ppxopt = "ppx_deriving,./ppx_lens.cma"
  BuildDepends:
    compiler-libs, ppx_deriving
  Modules:
    Ppx_lens

Executable examples_linlist
  Path: examples
  Build$:        flag(test)
  Install$:      false
  CompiledObject: best
  BuildDepends:
    linocaml, linocaml.ppx, linocaml.ppx_lens
  MainIs:
    linlist.ml
